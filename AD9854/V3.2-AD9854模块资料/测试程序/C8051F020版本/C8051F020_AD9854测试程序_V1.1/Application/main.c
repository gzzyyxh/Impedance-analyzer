//-----------------------------------------------------------------
// 程序描述:
// 　　C8051F020_AD9854测试程序_V1.1
// 作　　者: 凌智电子
// 开始日期: 2015-07-15
// 完成日期: 2015-07-16
// 修改日期: 2015-07-16
// 当前版本: V1.1
// 历史版本:
// 　- V1.0: 基本的AD9854并行控制输出，液晶显示功能
// 　- V1.1：并行控制转串行控制
// 调试工具: 凌智C8051F核心板V1.1、1602液晶屏
// 说　　明: 
//				(1) 调试使用的系统时钟频率Fsysclk=22.1184MHz;
//     		(2) AD9854的数据传输方式:串行传输方式;
//				(3) AD9854_IO与凌智C8051F核心板V1.1连接方式如30-44行代码提示连接
//        (4) 本测试程序实现基本的AD9854控制输出，即1MHz正弦波输出。可通过修改59行(fre值)代码修改输出频率
//-----------------------------------------------------------------

//-----------------------------------------------------------------
// 头文件包含
//-----------------------------------------------------------------
#include <c8051f020.h>
#include "system_init.h"
#include "AD9854.h"
#include "CharLCD.h"
#include "delay.h"
#include "type.h"

//-----------------------------------------------------------------
//               IO 连接说明
//-----------------------------------------------------------------
//    AD9854         |      020         
// A0/SDIO           -->   P10				
// A1/SDO            -->   P11			
// A2/IORST          -->   P12			
// RD                -->   P07
// WR                -->   P06
// UDCLK             -->   P05
// RESET             -->   P04
// S/P               -->   P00
// OSK               -->   P01
// FDSTA             -->   P02
//-----------------------------------------------------------------

//-----------------------------------------------------------------
// 主程序
//-----------------------------------------------------------------
void main(void)
{  
	ulong fre ;
	
	init();
	WrCLcdC(0x06);
	WriteString(1, 1,"  AD9854 TEST!  ");
	WriteString(2, 1,"Fre:         Hz");
  AD9854_Init();
	
	fre = 1000000;
	if (fre > 99999999)
	{
		fre = 99999999;
	}
	WrCLcd_long_num (2,6,fre);
	AD9854_SetSine ( fre , 4095 );
  while (1)
  {
    ;							 				
  }
}

//-----------------------------------------------------------------
// End Of File
//-----------------------------------------------------------------