C51 COMPILER V9.06   MAIN                                                                  06/06/2017 10:23:38 PAGE 1   


C51 COMPILER V9.06, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\keil_32\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          //-----------------------------------------------------------------
   2          // ³ÌÐòÃèÊö:
   3          // ¡¡¡¡51_AD9854²âÊÔ³ÌÐò_V2.0
   4          // ×÷¡¡¡¡Õß: ÁèÖÇµç×Ó
   5          // ¿ªÊ¼ÈÕÆÚ: 2017-06-1
   6          // Íê³ÉÈÕÆÚ: 2017-06-5
   7          // ÐÞ¸ÄÈÕÆÚ: 2017-06-5
   8          // µ±Ç°°æ±¾: V2.0
   9          // ÀúÊ·°æ±¾:
  10          // ¡¡- V1.0: »ù±¾µÄAD9854²¢ÐÐ¿ØÖÆÊä³ö£¬Òº¾§ÏÔÊ¾¹¦ÄÜ
  11          // ¡¡- V1.1£º²¢ÐÐ¿ØÖÆ×ª´®ÐÐ¿ØÖÆ
  12          // ¡¡- V2.0: ²âÊÔAD9854¸÷¸öµ÷ÖÆ²¨ÐÎÊä³ö¹¦ÄÜ
  13          // µ÷ÊÔ¹¤¾ß: 51¿ª·¢°å¡¢1602Òº¾§ÆÁ
  14          // Ëµ¡¡¡¡Ã÷: 
  15          //        (1) µ÷ÊÔÊ¹ÓÃµÄÏµÍ³Ê±ÖÓÆµÂÊFsysclk=12MHz;
  16          //        (2) AD9854µÄÊý¾Ý´«Êä·½Ê½:²¢ÐÐ´«Êä·½Ê½;
  17          //        (3) AD9854_IOÓë51¿ª·¢°åÁ¬½Ó·½Ê½Èç32-40ÐÐ´úÂëÌáÊ¾Á¬½Ó
  18          //        (4) ±¾²âÊÔ³ÌÐòÊµÏÖ¸÷¸öµ÷ÖÆ²¨ÐÎÊä³ö¹¦ÄÜ,Í¨¹ý°´¼ü'K2'¿ØÖÆÇÐ»»Êä³öµ÷ÖÆ²¨ÐÎ
  19          //-----------------------------------------------------------------
  20          
  21          //-----------------------------------------------------------------
  22          // Í·ÎÄ¼þ°üº¬
  23          //-----------------------------------------------------------------
  24          #include <reg52.h>
  25          #include <key.h>
  26          #include <init.h>
  27          #include <AD9854.h>
  28          //-----------------------------------------------------------------
  29          //               IO Á¬½ÓËµÃ÷
  30          //-----------------------------------------------------------------
  31          //    AD9854         |      51         
  32          //   ADDER_BUS[5:0]    -->   P0{5:0}
  33          //   DATA_BUS[7:0]     -->   P1{7:0}
  34          //   AD9854_RST         -->   P2^0;       
  35          //   AD9854_SP          -->   P2^1;
  36          //   AD9854_OSK         -->   P2^2;       //osk
  37          //   AD9854_UDCLK       -->   P2^4; 
  38          //   AD9854_WR          -->   P0^7;
  39          //   AD9854_FDATA       -->   P2^6;       //fsk/bpsk/hold
  40          //   AD9854_RD          -->   P2^7;
  41          //-----------------------------------------------------------------
  42          
  43          
  44          //-----------------------------------------------------------------
  45          // Ö÷³ÌÐò
  46          //-----------------------------------------------------------------
  47          void main(void)
  48          {  
  49   1        uchar key_value = 0,key_count = 0;
  50   1        
  51   1        init();
  52   1        LCD_Clear();//ÇåÆÁ
  53   1        LCD_Write_String(1, 0,"  AD9854 TEST!  ");
  54   1        LCD_Write_String(1, 1,"K2:  Select Wave");
  55   1        
C51 COMPILER V9.06   MAIN                                                                  06/06/2017 10:23:38 PAGE 2   

  56   1        while (1)
  57   1        {
  58   2          key_value = Key_Scan ();                   // »ñÈ¡¼üÖµ
  59   2          if(key_value==1)
  60   2          {
  61   3            key_count ++;
  62   3            LCD_Write_String(1, 1,"                 "); 
  63   3            switch (key_count)
  64   3            {
  65   4              case  1 : {                             
  66   5                          AD9854_Init();                      
  67   5                          AD9854_SetSine (1000000, 4050);             // AD9854ÕýÏÒ²¨µãÆµÊä³ö£¬1M500 mv     
  68   5                          LCD_Write_String(2, 1,"     SINE        ");
  69   5                        }break;
  70   4             case  2 :  {
  71   5                          AD9854_InitFSK();
  72   5                          AD9854_SetFSK(10000,100000);                //FDATA¸ßµçÆ½Êä³ö100k£¬µÍµçÆ½Êä³ö10k£¬¿ØÖÆÐÅºÅ1k·½²¨  
  73   5                          LCD_Write_String(2, 1,"     FSK         ");
  74   5                        }break;
  75   4             case  3 :  {
  76   5                          AD9854_InitBPSK();                      
  77   5                          AD9854_SetBPSK(0, 8192);                    // FDATA¸ßµçÆ½£¬ÏàÎ»Îª0£¬µÍµçÆ½ÏàÎ»Îª180      
  78   5                          LCD_Write_String(2, 1,"     BPSK        ");                  
  79   5                        }break;
  80   4             case  4 :  {
  81   5                          AD9854_InitRFSK();                      
  82   5                          AD9854_SetRFSK(1000000,40000000,100000,524288);  // FDATAÎªµÍµçÆ½ÎªÔöÐ±ÂÊ£¬¸ßµçÆ½Îª½µÐ
             -±ÂÊ   
  83   5                          LCD_Write_String(2, 1,"     RFSK        ");    
  84   5                         
  85   5                        }break;
  86   4             case  5 :  {
  87   5                             
  88   5                          AD9854_InitAM();
  89   5                          AD9854_SetAM(4000);                           //am  
  90   5                          LCD_Write_String(2, 1,"      A M        ");  
  91   5                          
  92   5                        }break;
  93   4             case  6 :  {
  94   5                          AD9854_InitOSK();                     
  95   5                          AD9854_SetOSK (100);                         // OSK¸ßµçÆ½£¬·ùÖµÔö¼Ó£»µÍµçÆ½·ùÖµ¼õÉÙ£¬100Îª±ä»¯µÄ
             -Ð±ÂÊ£¨Âú·ùÊä³ö£©    
  96   5                          LCD_Write_String(2, 1,"      OSK        ");     
  97   5                         }break;
  98   4             case  7 :  {
  99   5                          AD9854_InitChirp();                     
 100   5                          AD9854_SetChirp (1000000,100000,524288);   //FDATA¸ßµçÆ½£¬ÐÅºÅÆµÂÊÍ£Ö¹£»      
 101   5                          LCD_Write_String(2, 1,"     CHIRP        ");
 102   5                          key_count= 0 ;
 103   5                         }break;
 104   4              default : break;
 105   4            }
 106   3          } 
 107   2           
 108   2          }         
 109   1        }
 110          
 111          
 112          //-----------------------------------------------------------------
 113          // End Of File
 114          //-----------------------------------------------------------------
 115          
C51 COMPILER V9.06   MAIN                                                                  06/06/2017 10:23:38 PAGE 3   

 116          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    360    ----
   CONSTANT SIZE    =    179    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
